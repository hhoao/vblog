#file: noinspection YAMLSchemaValidation
name: Deploy Project

on:
  push:
    branches:
     - server

jobs:
  deploy-project:
    uses: ./.github/workflows/deploy.yml
    strategy:
      matrix:
        project-name: [ vblog-server-admin, vblog-server-portal, vblog-server-search ]
    with:
      project-name: ${{ matrix.project-name }}
      force-deploy: 'false'
    secrets:
      redis-server-host: ${{  secrets.REDIS_SERVER_HOST }}
      elastic-server-host: ${{ secrets.ELASTIC_SERVER_HOST }}
      mysql-server-host: ${{ secrets.MYSQL_SERVER_HOST }}
      mysql-root-password: ${{ secrets.MYSQL_ROOT_PASSWORD }}
      jwt-secret: ${{ secrets.JWT_SECRET }}
      elastic-password: ${{ secrets.ELASTIC_PASSWORD }}
      docker-username: ${{ secrets.DOCKER_USERNAME }}
      docker-password: ${{ secrets.DOCKER_PASSWORD }}
